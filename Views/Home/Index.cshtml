@{
    ViewData["Title"] = "Home Page";
}

<section class="auth-section">
    <h2 class="auth-title">Welcome</h2>
    <p class="auth-subtitle">
        Please enter your registration details or log in if you already have an account.
    </p>

    <div class="button-container">
        <button type="button" onclick="toggleForm('registerForm')">Register</button>
        <button type="button" onclick="toggleForm('loginForm')">Login</button>
    </div>

    <!-- Registration Form (Default visible) -->
    <form id="registerForm" class="user-form card" style="display:block;" onsubmit="return handleRegister(event);">
        <h3>User Registration</h3>

        <label for="regName">Name:</label>
        <input type="text" id="regName" name="Name" placeholder="Enter Name" required />

        <label for="regSurname">Surname:</label>
        <input type="text" id="regSurname" name="Surname" placeholder="Enter Surname" required />

        <label for="regEmail">Email:</label>
        <input type="email" id="regEmail" name="Email" placeholder="Enter Email" required />

        <label for="regPassword">Password:</label>
        <input type="password" id="regPassword" name="Password" placeholder="Enter Password" required />

        <button type="submit" class="btn-primary">Register</button>
    </form>

    <!-- Login Form (Hidden by default) -->
    <form id="loginForm" class="user-form card" style="display:none;">
        <h3>User Login</h3>

        <label for="loginName">Name:</label>
        <input type="text" id="loginName" name="Name" placeholder="Enter Name" required />

        <label for="loginSurname">Surname:</label>
        <input type="text" id="loginSurname" name="Surname" placeholder="Enter Surname" required />

        <label for="loginEmail">Email:</label>
        <input type="email" id="loginEmail" name="Email" placeholder="Enter Email" required />

        <label for="loginPassword">Password:</label>
        <input type="password" id="loginPassword" name="Password" placeholder="Enter Password" required />

        <div class="button-container vertical">
            <button type="button" onclick="validateLogin('@Url.Action("Lecturer","Home")')">Login as Lecturer</button>
            <button type="button" onclick="validateLogin('@Url.Action("Project_Manager","Home")')">Login as Project Manager</button>
            <button type="button" onclick="validateLogin('@Url.Action("Program_coordinator","Home")')">Login as Program Coordinator</button>
        </div>

        <p id="loginMessage" class="error-message"></p>
    </form>
</section>

<script>
    function toggleForm(formId) {
        document.getElementById("registerForm").style.display = "none";
        document.getElementById("loginForm").style.display = "none";
        document.getElementById(formId).style.display = "block";
    }

    function handleRegister(event) {
        event.preventDefault();
        let name = document.getElementById("regName").value.trim();
        let surname = document.getElementById("regSurname").value.trim();
        let email = document.getElementById("regEmail").value.trim();
        let password = document.getElementById("regPassword").value.trim();

        if (!name || !surname || !email || !password) {
            alert("⚠ Please fill in all fields.");
            return false;
        }

        toggleForm('loginForm');
        return false;
    }

    function validateLogin(redirectUrl) {
        let name = document.getElementById("loginName").value.trim();
        let surname = document.getElementById("loginSurname").value.trim();
        let email = document.getElementById("loginEmail").value.trim();
        let password = document.getElementById("loginPassword").value.trim();
        let message = document.getElementById("loginMessage");

        if (!name || !surname || !email || !password) {
            message.textContent = "⚠ Please fill in all fields before continuing.";
            return;
        }

        message.textContent = "";
        window.location.href = redirectUrl;
    }
</script>
